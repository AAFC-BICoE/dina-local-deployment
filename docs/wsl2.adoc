= WSL2

WSL2 (Windows Subsystem for Linux 2) is a compatibility layer that enables you to run a full Linux kernel natively on Windows 10/11.
On Windows, WSL2 should be used in replacement of the Ubuntu Virtual Machine mentioned above.

== Setup

To stop WSL from overwriting `/etc/hosts` every time it starts, disable automatic host generation in WSL to add the custom DINA entries.

Edit the `/etc/wsl.conf` to have at the bottom of the file:

[source, bash]
----
[network]
generateHosts = false
----

In WSL the content of `/etc/hosts` should be changed to:

[source, bash]
----
127.0.0.1 dina.local
127.0.0.1 api.dina.local
127.0.0.1 keycloak.dina.local
----

== VPN

On VPN the WSL2 networking can be affected.

You can change WSL Network mode:

. Shutdown wsl if running (wsl --shutdown)
. Open WSL Setting (through windows search bar) -> Networking -> Set "Networking mode" to "Mirrored"
. Restart host machine

== Browser Installation

To access `dina.local`, you must install a browser directly within the WSL2 environment.

=== Firefox
Follow the official documentation to install the `.deb` package:

link:https://support.mozilla.org/en-US/kb/install-firefox-linux#w_install-firefox-deb-package-for-debian-based-distributions-recommended[Install Firefox on Linux^]

=== Google Chrome
Run the following commands in your WSL2 terminal:

[source,bash]
----
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
sudo apt install ./google-chrome-stable_current_amd64.deb
google-chrome
----

== Visual Studio Code Integration

You can continue using the Windows version of VS Code by connecting it to WSL via the official extension.

.Install the WSL Extension
You can find this in the Extensions marketplace or run:
[source,bash]
----
code --install-extension ms-vscode-remote.remote-wsl
----

.Connecting to WSL
1. Open the **Command Palette** (kbd:[Ctrl+Shift+P]).
2. Search for and select `WSL: Connect to WSL`.
3. Choose `Ubuntu` (or your specific distro) as the environment.

[TIP]
====
Once connected, you can use the VS Code integrated terminal to install tools and clone repositories directly into the Linux file system.
====
